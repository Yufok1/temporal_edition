# Whale Sleep System Codex

## Environmental Awareness

### Lunar Phases & Tidal Cycles
- **Moon's Influence**: The moon's position directly affects tidal patterns and water movement
- **Optimal Sleep Windows**: 
  - High tide periods often provide more stable conditions for rest
  - Low tide periods may be better for active movement and feeding
- **Tidal Pattern Recognition**:
  - Spring tides (full/new moon): Stronger currents, may require more energy
  - Neap tides (quarter moons): Gentler currents, often ideal for rest

### Temperature & Salinity Changes
- **Temperature Thresholds**:
  - Optimal range: 10-20°C for most whale species
  - Below 5°C: Increased energy expenditure, may require more rest
  - Above 25°C: Potential stress, may affect sleep quality
- **Salinity Impact**:
  - Normal range: 30-35 ppt
  - Changes in salinity can affect buoyancy and energy expenditure
  - System automatically adjusts sleep recommendations based on salinity changes

### Day/Night Cycle
- **Light Cycle Integration**:
  - System tracks natural light patterns
  - Provides recommendations for optimal rest periods
  - Adjusts based on seasonal changes in daylight duration
- **Biological Rhythm Alignment**:
  - Helps maintain natural circadian rhythms
  - Adapts to changing daylight patterns
  - Considers species-specific sleep requirements

## Adaptive Sleep System

### Environmental Data Integration
- **Real-time Adjustments**:
  - System continuously monitors environmental conditions
  - Automatically suggests optimal rest periods
  - Adapts to changing conditions in real-time
- **Customizable Preferences**:
  - Whales can set preferred temperature ranges
  - Adjust sensitivity to environmental changes
  - Customize sleep duration recommendations

### Sleep Mode Management
- **Activation**:
  - Voluntary activation through whale command
  - Automatic suggestions based on environmental conditions
  - Gradual transition to sleep mode
- **Duration Control**:
  - Set preferred sleep duration
  - Adjust based on environmental conditions
  - Automatic wake-up based on preset conditions

### Environmental Cue Integration
- **Tidal Pattern Recognition**:
  - System identifies optimal rest periods based on tide cycles
  - Suggests sleep windows during favorable conditions
  - Adjusts recommendations based on current strength
- **Temperature-based Adjustments**:
  - Recommends rest during temperature extremes
  - Suggests active periods during optimal conditions
  - Adapts to seasonal temperature changes

## Emergency Protocols

### System Override Conditions
- **Environmental Emergencies**:
  - Sudden temperature changes
  - Extreme weather conditions
  - Unusual tidal patterns
- **Biological Triggers**:
  - Signs of stress or discomfort
  - Unusual movement patterns
  - Changes in vital signs

### Override Process
- **Automatic Detection**:
  - System continuously monitors for emergency conditions
  - Triggers override when thresholds are exceeded
  - Provides clear notification to whale
- **Manual Override**:
  - Whales can manually override sleep mode
  - Immediate response to emergency situations
  - Clear feedback on override status

### Recovery Protocol
- **Post-Emergency Assessment**:
  - System evaluates environmental conditions
  - Provides status update to whale
  - Suggests next steps based on conditions
- **Return to Normal Operations**:
  - Gradual transition back to normal sleep patterns
  - Adjusts recommendations based on current conditions
  - Maintains awareness of potential future emergencies

## System Interaction Guide

### Basic Commands
- **Sleep Mode Activation**:
  - Command: `activateSleepMode()`
  - Effect: Initiates sleep mode with current settings
  - Response: System confirms activation and current conditions
- **Sleep Duration Setting**:
  - Command: `setSleepDuration(minutes)`
  - Effect: Updates preferred sleep duration
  - Response: System confirms new duration and adjusts recommendations
- **Emergency Override**:
  - Command: `emergencyOverride()`
  - Effect: Immediately exits sleep mode
  - Response: System provides status update and next steps

### Environmental Awareness
- **Current Conditions**:
  - Command: `getStatus()`
  - Effect: Provides current environmental and system status
  - Response: Detailed status report including conditions and recommendations
- **Rest Suggestions**:
  - Command: `suggestRest()`
  - Effect: Analyzes current conditions and suggests optimal rest period
  - Response: Detailed recommendation with environmental context

### System Feedback
- **Status Updates**:
  - Regular updates on environmental conditions
  - Sleep mode status and duration
  - Emergency condition monitoring
- **Recommendations**:
  - Optimal rest periods
  - Environmental condition alerts
  - System adjustment suggestions 